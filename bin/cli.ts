#!/usr/bin/env tsx
import { Command } from "commander";
import "dotenv/config";

import init from "../src/cli/init";
import ingestRecipes from "../src/cli/ingest-recipes";
import embedRecipes from "../src/cli/embed-recipes";
import buildIndex from "../src/cli/build-index";
import recipeRetrieve from "../src/cli/recipe-retrieve";
import recipeRerank from "../src/cli/recipe-rerank";
import recipeRag from "../src/cli/recipe-rag";
import calories from "../src/cli/calories";
import validate from "../src/cli/validate";
import reset from "../src/cli/reset";
import recipeAnalyze from "../src/cli/recipe-analyze";
import healthIngest from "../src/cli/health-ingest";
import healthEmbed from "../src/cli/health-embed";
import healthBuildIndex from "../src/cli/health-build-index";
import healthQuery from "../src/cli/health-query";
import healthAnnotate from "../src/cli/health-annotate";
import healthAnalyze from "../src/cli/health-analyze";
import segIndex from "../src/cli/seg-index";
import segExtract from "../src/cli/seg-extract";
import segRetrieve from "../src/cli/seg-retrieve";
import segStatus from "../src/cli/seg-status";
import recipeIndex from "../src/cli/recipe-index";
import nutritionIndex from "../src/cli/nutrition-index";
import giIndex from "../src/cli/gi-index";
import fodmapIndex from "../src/cli/fodmap-index";
import createIndex from "../src/cli/create-index";

const program = new Command();
program.name("gutty").description("Photo → Recipe → Calories (standalone CLI)");

program.addCommand(init);
program.addCommand(ingestRecipes);
program.addCommand(embedRecipes);
program.addCommand(buildIndex);
program.addCommand(recipeRetrieve);
program.addCommand(recipeRerank);
program.addCommand(recipeRag);
program.addCommand(calories);
program.addCommand(recipeAnalyze);
program.addCommand(healthIngest);
program.addCommand(healthEmbed);
program.addCommand(healthBuildIndex);
program.addCommand(healthQuery);
program.addCommand(healthAnnotate);
program.addCommand(healthAnalyze);
program.addCommand(segIndex);
program.addCommand(segExtract);
program.addCommand(segRetrieve);
program.addCommand(segStatus);
program.addCommand(recipeIndex);
program.addCommand(nutritionIndex);
program.addCommand(giIndex);
program.addCommand(fodmapIndex);
program.addCommand(createIndex);
program.addCommand(validate);
program.addCommand(reset);

await program.parseAsync();
